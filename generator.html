<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>SSH Config Generator</title>
</head>

<body>

    <h1>プロジェクト実習 SSH Config Generator</h1>

    学籍番号+2桁（大学メールの@の左側）
    <br>
    <input type="text" id="username" placeholder="例）c011712375" maxlength=10>

    <br><br>

    <label for="team">チーム番号</label>
    <br>
    <input type="number" id="team" placeholder="例）99" max=12 min=1>

    <br><br>

    <input type="button" value="生成" id="generate">

    <pre id="config" style="border: solid 2px black; min-height: 40px; width: 300px;"></pre>

    <script>
        let button = document.getElementById('generate');
        button.addEventListener('click', () => {
            const username_raw = document.getElementById('username');
            const username = username_raw.value.toLowerCase();
            const team = document.getElementById('team');
            const config = document.getElementById('config');

            console.log(username.length)
            if (username.length != 10) {
                alert("学籍番号+2桁が不正です");
                return;
            }
            if (team.value > 20 || team.value < 1) {
                alert("チーム番号が不正です")
                return;
            }

            const team_id = ('000' + team.value).slice(-3);

            config.textContent = `
Host sre-gw
    User ${username}
    Hostname 10.204.227.167
    IdentityFile ~/.ssh/id_ed25519_sre

Host sre${team_id}h
    User ${username}
    Hostname sre${team_id}h.local
    IdentityFile ~/.ssh/id_ed25519_sre
    ProxyJump sre-gw

Host sre${team_id}t
    User ${username}
    Hostname sre${team_id}t.local
    IdentityFile ~/.ssh/id_ed25519_sre
    ProxyJump sre-gw

`;
        });
    </script>
</body>

</html>
